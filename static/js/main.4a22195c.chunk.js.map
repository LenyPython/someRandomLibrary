{"version":3,"sources":["slices/components/components.tsx","sagas/actionTypes/actions.tsx","appStore/hooks.tsx","components/Navigation/ThemeSwitcher.tsx","components/Styled/Styled.tsx","slices/user/user.ts","firebase/firebase-config.ts","slices/books/booksSlice.tsx","sagas/actions.tsx","slices/addBookForm/addBookForm.tsx","components/Navigation/LogMenu.tsx","components/Navigation/Navigation.tsx","components/Welcome/Welcome.tsx","components/BookEntry/ImgScreener/ImgScreener.tsx","components/BookEntry/EntryPanel/EntryPanel.tsx","components/BookEntry/EntryData/EntryData.tsx","slices/requests/requestsSlice.ts","components/BookEntry/BookEntry.tsx","customFunc/Funcs.tsx","components/Browse/Browse.tsx","components/AccountPanel/AdminPanel/AdminMenu.tsx","slices/foundEntries/foundEntries.ts","components/AccountPanel/AdminPanel/SearchApi/FoundEntries.tsx","components/AccountPanel/AdminPanel/SearchApi/SearchApi.tsx","components/AccountPanel/AdminPanel/AddingForm.tsx","components/AccountPanel/AdminPanel/Requests.tsx","slices/usersData/user.ts","components/AccountPanel/AdminPanel/Users.tsx","components/AccountPanel/AdminPanel/AdminPanel.tsx","slices/borrowedBooks/borrowedBooks.ts","components/AccountPanel/UserPanel/UserMenu.tsx","components/AccountPanel/UserPanel/BorrowBook/BorrowBook.tsx","slices/currentBook/currentBook.ts","components/AccountPanel/UserPanel/BorrowedBooks/BorrowedBooks.tsx","components/AccountPanel/UserPanel/UserPanel.tsx","components/AccountPanel/AccountPanel.tsx","components/LoginForm/LoginForm.tsx","components/MainContent/MainContent.tsx","components/Styled/GlobalStyle.tsx","components/Footer/Footer.tsx","components/AlertArea/AlertArea.tsx","components/LoadingScreen/LoadingScreen.tsx","components/ReadBookContainer/ReadBookContainer.tsx","App.tsx","sagas/getBookSaga.ts","sagas/errorSaga.ts","sagas/getFirebaseDataSaga.ts","sagas/updateDb.ts","sagas/borrowBookSaga.ts","sagas/rootSaga.ts","sagas/index.ts","appStore/store.ts","index.tsx"],"names":["ThemeType","getBookActions","appStateActions","FbDataActions","usersActions","initialState","theme","light","isLoading","snackbar","open","vertical","horizontal","alert","message","componentsSlice","createSlice","name","reducers","changeTheme","state","dark","changeIsLoading","action","payload","closeSnackbar","status","sendMessage","actions","selectTheme","componentsState","selectIsLoading","getSnackbarState","useAppDispatch","useDispatch","useAppSelector","useSelector","Switcher","styled","label","ThemeSwitcher","dispatch","type","onChange","checked","icon","width","height","color","PanelGrid","div","List","StyledMenu","LinkA","Link","Button","button","StyledA","NavLink","Container","user","id","email","onUserChange","admin","setAdminPrivlidge","getUser","currentUser","app","initializeApp","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","db","getFirestore","auth","getAuth","createUser","pass","a","createUserWithEmailAndPassword","setDoc","doc","uid","books","signIn","signInWithEmailAndPassword","logOut","signOut","booksSlice","list","setState","addBook","push","removeBooks","BooksToDelete","filter","book","has","changeBookStatus","available","forEach","selectBooks","FormInputEnum","sendError","ERROR","getBorrowed","GET_BORROWED","borrowReturn","BORROW_RETURN","updateUserPrivlidge","CHANGE_STATUS","LogMenu","to","className","onClick","e","NavContainer","Navigation","WelcomeScreen","Welcome","ImgContainer","Cover","img","NoImgIcon","Icon","ImgScreener","image","title","src","alt","EntryPanel","props","authors","join","EntryData","cover","requests","toAdd","toDelete","length","addToAdd","sessionStorage","setItem","JSON","stringify","addToDelete","removeToAdd","item","removeToDelete","emptyRequests","getRequests","reqLength","StyledEntry","StyledLink","BookEntry","variant","disabled","toBooksList","bookObj","entry","BrowserContainer","Browse","AdminMenu","url","useRouteMatch","requestsNumber","requestEvent","foundSlice","addToFound","unshift","pop","foundBooksSelector","found","createTheme","components","MuiDataGrid","styleOverrides","root","backgroundColor","FoundEntries","rows","map","idx","ISBN","columns","field","flex","headerName","renderCell","params","value","toString","row","data","author","size","ThemeProvider","autoHeight","disableColumnMenu","disableColumnSelector","disableColumnFilter","hideFooter","SearchApi","useState","setISBN","htmlFor","href","string","target","match","GET_BOOK","addFormState","changeAuthor","changeTitle","changeImg","changeISBN","selectAddForm","AddingForm","handleChange","preventDefault","Error","onSubmit","Requests","handleRemoveReq","cmd","Box","textAlign","UPDATE_REQUESTS","sx","margin","users","setUsers","updateUserStatus","removeUsers","getUsersData","usersData","UserContainer","Users","usersList","AdminPanel","booksObj","path","exact","borrowedList","saveMyBorrowed","addMyBorrowed","removeMyBorrowed","selectBorrowedBooks","borrowedBooks","selectBorrowedBooksLength","UserMenu","myBorrowedLength","linkColor","TextContainer","BorrwoBook","BOOKS","useParams","find","undefined","background","currentRead","setCurrentRead","closeWindow","getCurrentRead","EntryContainer","BorrowedBooks","borrowedBooksIds","Books","hash","i","handleClick","UserPanel","BorrowBook","AccountPanel","StyledForm","form","LoginForm","reg","history","useHistory","setEmail","pass1","setPass1","pass2","setPass2","handleSubmit","error","TextField","required","MainContent","GlobalStyle","createGlobalStyle","StyledFooter","footer","Footer","AlertArea","Snackbar","anchorOrigin","onClose","autoHideDuration","Alert","severity","ScreenShadow","LoadingScreen","minWidth","maxWidth","LinearProgress","ReadContainer","ReadBookContainer","App","currentBook","useEffect","onAuthStateChanged","GET_DATA","CHECK_ADMIN_PRIV","checkAdminPriv","EMPTY_DATA","role","getBookSaga","getBookWatcher","getBookWorker","saveBookWorker","console","log","all","takeLatest","takeEvery","SAVE_BOOK","call","fetchBook","Object","keys","put","key","by_statement","coverImg","large","medium","small","URL","fetch","json","JSONobj","errorWatcher","errorWorker","getFirebaseDataWatcher","checkAdminWorker","getFbDataWorker","emptyFbDataWorker","getUsersDataWorker","GET_USERS","toAddRequests","getItem","toDeleteRequests","array","parse","getBookEntries","response","getUsersFromDb","USERS","getDocs","collection","bookEntries","docs","docsSnap","getDoc","docSnap","exists","updateDBWatcher","updateDBWorker","updateUsersWorker","addDocToDb","toDeleteBooksHash","Set","deleteDocFormDb","add","updateUser","privlidge","userToUpdateRef","updateDoc","deleteDoc","addDoc","docRef","getBorrowedWatcher","getBorrowedWorker","borrowBookWorker","updateMyBorrowed","updateAvailable","toUpdate","arrayRemove","arrayUnion","booksArr","rootSaga","fork","sagaMiddleware","createSagaMiddleware","store","configureStore","reducer","foundBooksReducer","booksReducer","borrowedBooksReducer","addFormStateReducer","componentsReducer","currentUserReducer","requestsReducer","usersDataReducer","currentReadBookReducer","middleware","getDefaultMiddleware","prepend","run","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.4a22195c.chunk.js","sourcesContent":["import type { RootState } from '../../appStore/store'\nimport { createSlice, PayloadAction } from '@reduxjs/toolkit'\nimport { SnackbarOrigin } from '@mui/material/Snackbar';\nimport { AlertColor } from '@mui/material/Alert';\n\n\nexport enum ThemeType {\n  dark,\n  light\n}\n\nexport interface snackbarActionPayload {\n  alert: AlertColor\n  message: string\n}\ninterface snackbarStatus extends SnackbarOrigin, snackbarActionPayload {\n  open: boolean\n}\n\ninterface componentsInterface {\n  theme: ThemeType\n  isLoading: boolean\n  snackbar: snackbarStatus\n}\nconst initialState: componentsInterface = {\n  theme: ThemeType.light,\n  isLoading: true,\n  snackbar: {\n    open: false,\n    vertical: 'top',\n    horizontal: 'center',\n    alert: 'success',\n    message: ''\n  }\n}\n\nconst componentsSlice  = createSlice({\n  name: 'componenstState',\n  initialState,\n  reducers: {\n    changeTheme: (state) => {\n      if(state.theme === ThemeType.light) state.theme = ThemeType.dark\n      else state.theme = ThemeType.light\n    },\n    changeIsLoading: (state, action: PayloadAction<boolean>) => {\n      state.isLoading = action.payload\n    },\n    closeSnackbar: status => {\n      status.snackbar.open = false \n    },\n    sendMessage: (status, action: PayloadAction<snackbarActionPayload>) => {\n      const { alert, message } = action.payload\n      status.snackbar = {\n        ...status.snackbar,\n        open: true,\n        alert,\n        message\n      }\n\n    }\n}\n}\n)\n\nexport const { closeSnackbar, changeTheme, changeIsLoading, sendMessage } = componentsSlice.actions\n\nexport const selectTheme = (state: RootState) => state.componentsState.theme\nexport const selectIsLoading = (state: RootState) => state.componentsState.isLoading\nexport const getSnackbarState = (state: RootState) => state.componentsState.snackbar\n\nexport default componentsSlice.reducer\n","import { BookInterface } from '../../constants/interface/bookSlice'\nimport {snackbarActionPayload} from '../../slices/components/components';\nimport {initialRequestsStateInterface} from '../../slices/requests/requestsSlice';\n\nexport enum getBookActions {\n  SAVE_BOOK = 'SAVE_BOOK',\n  SAVE_BORROWED_BOOKS = 'SAVE_BORROWED_BOOKS',\n  GET_BOOK = 'GET_BOOK',\n}\nexport enum appStateActions {\n  ERROR = 'ERROR'\n}\n\nexport enum FbDataActions {\n  GET_DATA = 'GET_DATA',\n  SAVE_DATA = 'SAVE_DATA',\n  EMPTY_DATA = 'EMPTY_DATA',\n  UPDATE_REQUESTS = 'UPDATE_REQUESTS'\n}\nexport enum usersActions {\n  CHECK_ADMIN_PRIV = 'CHECK_ADMIN_PRIV',\n  GET_USERS = 'GET_USERS',\n  CHANGE_STATUS = 'CHANGE_STATUS',\n  GET_BORROWED = 'GET_BORROWED',\n  BORROW_RETURN = 'BORROW_RETURN'\n}\n\nexport interface borrowReturnInterface {\n  type: usersActions.BORROW_RETURN\n  payload: { id: string\n    uid: string\n    status: boolean\n  }\n}\nexport interface getFirebaseDataInterface {\n  type: FbDataActions.GET_DATA\n}\nexport interface emptyFirebaseDataInterface {\n  type: FbDataActions.EMPTY_DATA\n}\nexport interface getBorrowedInterface {\n  type: usersActions.GET_BORROWED\n  payload: string\n}\nexport interface getUsersDataInterface {\n  type: usersActions.GET_USERS\n}\nexport interface updateDataBaseInterface {\n  type: FbDataActions.UPDATE_REQUESTS,\n  payload: initialRequestsStateInterface\n}\nexport interface updateUserPrivlidgeInterface {\n  type: usersActions.CHANGE_STATUS\n  payload: {\n    id: string\n    admin: boolean\n  }\n}\nexport interface checkAdminPrivInterface {\n  type: usersActions.CHECK_ADMIN_PRIV\n  payload: string\n}\nexport interface saveFbDataInterface {\n  type: FbDataActions.SAVE_DATA\n  payload: BookInterface\n}\n\nexport interface saveBookInterface {\n  type: getBookActions.SAVE_BOOK\n  payload: BookInterface\n}\nexport interface getBookInterface {\n  type: getBookActions.GET_BOOK\n  payload: string\n}\nexport interface errorInterface {\n  type: appStateActions.ERROR\n  payload: snackbarActionPayload\n}\n","import { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux';\nimport type { RootState, AppDispatch } from './store';\n\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\n\n\n","import styled from 'styled-components'\nimport { Icon } from '@iconify/react'\nimport { \n  selectTheme,\n  changeTheme,\n  ThemeType\n} from '../../slices/components/components'\nimport { \n  useAppDispatch,\n  useAppSelector\n} from '../../appStore/hooks'\n\n\nconst Switcher = styled.label`\n  position:relative;\n  width: 80px;\n  height: 35px;\n  margin-left: 1.2em;\n  input {\n    position: relative;\n    appearance: none;\n    z-index: 1;\n  }\n  span{\n    background: var(--secondary-color);\n    position: absolute;\n    border-radius: 17px;\n    width: 100%;\n    height: 100%;\n    top: 0px;\n    left: 0px;\n    & > div {\n      position: absolute;\n      transition: all .4s;\n      top: 5px;\n      left: 5px;\n    }\n   }\n   input:checked ~ span div{\n    left: 50px;\n   }\n`\n\nconst ThemeSwitcher = () => {\n  const theme = useAppSelector(selectTheme)\n  const dispatch = useAppDispatch()\n\n  const handleClick = () => {\n    dispatch(changeTheme())\n\n  }\n  return (\n      <Switcher>\n        <input type=\"checkbox\"\n          onChange={handleClick}\n          checked={theme === ThemeType.dark}\n      />\n        <span>\n          <div>\n      {\n       theme === ThemeType.dark?\n      <Icon icon=\"fluent:weather-sunny-24-filled\" width=\"25\" height=\"25\" color=\"yellow\"/>:\n      <Icon icon=\"ri:moon-fill\" width=\"25\" height=\"25\" color=\"grey\"/>\n      }\n          </div>\n        </span>\n      </Switcher>\n\n  )\n}\n\nexport default ThemeSwitcher\n","import styled from 'styled-components'\nimport { Link, NavLink } from 'react-router-dom'\n\n\nexport const PanelGrid = styled.div`\n  background: var(--bg-color);\n  width: 100%;\n  height: 100%;\n  padding: 2em;\n  display: grid;\n  grid-template-columns: 150px 1fr;\n`\nexport const List = styled.div`\nwidth: 100%;\ngrid-column: 2;\n`\n\nexport const StyledMenu = styled.div`\n  box-sizing: border-box;\n  grid-column: 1;\n  background: var(--secondary-color);\n  border-radius 10px;\n  width: 100%;\n  padding: .6em;\n  text-align: center;\n  p{\n    margin: .3em auto;\n  }\n`\nexport const LinkA = styled(Link)`\n  display: inline-block;\n  font-weight: 600;\n  text-decoration: none;\n  width: 90%;\n  background: var(--main-color);\n  border-radius: .4em;\n  border: none;\n  padding: .3em 0;\n  margin: .3em;\n  color: var(--main-button-font-color);\n  cursor: pointer;\n  &.event {\n    background: var(--main-error-color);\n  }\n`\nexport const Button = styled.button`\n  font-weight: 600;\n  width: 90%;\n  background: var(--main-color);\n  border-radius: .4em;\n  border: none;\n  padding: .3em 0;\n  margin: .3em;\n  color: var(--main-button-font-color);\n  cursor: pointer;\n`\nexport const StyledA = styled(NavLink)`\n  text-decoration: none;\n  font-size: 1.2em;\n  color: var(--main-header-font-color);\n  margin: 0 .6em;\n  &.login {\n    background: var(--main-color);\n    border: 1px solid var(--main-header-font-color);\n    border-radius: 5px;\n    padding: .4em .8em;\n  }\n  &:hover {\n    opacity: .7;\n  }\n  &:active {\n    font-weight: bold;\n  }\n`\nexport const Container = styled.div`\n  display: flex;\n  background: var(--secondary-color);\n  border-radius: 5px;\n  margin: 0 1em;\n  padding: 2em 3em;\n  & > * {\n    margin: .6em 1em;\n  }\n`\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit'\nimport type { RootState } from '../../appStore/store'\n\n\nexport interface userInterface {\n  id: string | null,\n  email: string | null\n  admin?: boolean\n}\nconst initialState: userInterface = {\n  id: null,\n  email: null\n}\n\nconst user = createSlice({\n  name: 'currentUser',\n  initialState,\n  reducers:{\n    onUserChange: (state, action: PayloadAction<userInterface>) =>{\n      const { id, email } = action.payload\n      state.id = id\n      state.email = email\n      state.admin = false\n    },\n    setAdminPrivlidge: state => {\n      state.admin = true\n    }\n  }\n})\n\nexport const { onUserChange, setAdminPrivlidge } = user.actions\n\nexport const getUser = (state: RootState) => state.currentUser\n\nexport default user.reducer\n","import { doc, setDoc } from 'firebase/firestore'\nimport { initializeApp } from \"firebase/app\";\nimport { getFirestore } from 'firebase/firestore'\nimport {\n  signOut,\n  getAuth,\n  signInWithEmailAndPassword,\n  createUserWithEmailAndPassword\n} from 'firebase/auth'\n\nconst firebaseConfig = {\n  apiKey: process.env.REACT_APP_API_KEY ,\n  authDomain: process.env.REACT_APP_AUTH_DOMAIN,\n  projectId: process.env.REACT_APP_PROJECT_ID,\n  storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\n  messagingSenderId: process.env.REACT_APP_MESSAGING_SENDER_ID,\n  appId: process.env.REACT_APP_APP_ID\n}\n\nconst app = initializeApp(firebaseConfig)\nconst db = getFirestore(app)\n\nexport default db\nexport const auth = getAuth(app)\n\nexport const createUser = async (email: string, pass: string) => {\n  const { user } = await createUserWithEmailAndPassword(auth, email, pass)\n  await setDoc(doc(db,'users', user.uid), { \n    admin: false,\n    email: user.email\n  } )\n    await setDoc(doc(db,'borrowed', user.uid), { \n    books: []\n  } )\n}\n\nexport const signIn = async (email: string, pass: string) => {\n   await signInWithEmailAndPassword(auth, email, pass)\n}\nexport const logOut = async () => {\n  await signOut(auth)\n}\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit'\nimport type { RootState } from '../../appStore/store'\nimport { \n  BookInterface,\n  StateInterface\n} from '../../constants/interface/bookSlice'\n\n\n\nconst initialState: StateInterface = {\n  list: []\n}\n\nexport const booksSlice = createSlice({\n  name: 'books',\n  initialState,\n  reducers: {\n    setState: (state, action: PayloadAction<BookInterface[]>) => {\n      state.list = action.payload\n    },\n    addBook: (state, action: PayloadAction<BookInterface>) => {\n      state.list.push(action.payload)\n    },\n    removeBooks: (state, action:PayloadAction<Set<string>>) =>{\n      const BooksToDelete = action.payload\n      state.list = state.list.filter( book => !BooksToDelete.has(book.id) ) \n    },\n    changeBookStatus: (status, action: PayloadAction<{id:string, available:boolean}>) => {\n      const { id, available } = action.payload\n      status.list.forEach( book => {\n        if(book.id === id) book.available = available\n      })\n    }\n\n\n    } \n  }\n)\n\n\nexport const { setState, addBook, removeBooks, changeBookStatus } = booksSlice.actions\n\nexport const selectBooks = (state: RootState) => state.books.list\n\nexport default booksSlice.reducer\n","import { BookInterface } from '../constants/interface/bookSlice'\nimport { snackbarActionPayload } from '../slices/components/components'\nimport {initialRequestsStateInterface} from '../slices/requests/requestsSlice'\nimport { \n  usersActions,\n  FbDataActions,\n  getBookActions,\n  saveBookInterface,\n  getBookInterface,\n  errorInterface,\n  getFirebaseDataInterface,\n  getUsersDataInterface,\n  getBorrowedInterface,\n  checkAdminPrivInterface,\n  updateUserPrivlidgeInterface,\n  emptyFirebaseDataInterface,\n  updateDataBaseInterface,\n  borrowReturnInterface,\n  appStateActions\n} from './actionTypes/actions'\n\nexport const saveBook = (payload: BookInterface): saveBookInterface => {\n  return { type:  getBookActions.SAVE_BOOK,\n          payload\n        }\n}\nexport const getBook = (payload: string): getBookInterface => {\n  return { type: getBookActions.GET_BOOK,\n        payload   \n  }\n}\n\nexport const sendError = (payload: snackbarActionPayload): errorInterface => {\n  return { type: appStateActions.ERROR,\n        payload\n  }\n}\n\nexport const getFirebaseData = (): getFirebaseDataInterface => {\n  return { type: FbDataActions.GET_DATA }\n}\nexport const emptyFirebaseData = (): emptyFirebaseDataInterface => {\n  return { type: FbDataActions.EMPTY_DATA }\n}\nexport const getUsersData = (): getUsersDataInterface => {\n  return { type: usersActions.GET_USERS }\n}\nexport const getBorrowed = (uid: string): getBorrowedInterface => {\n  return { type: usersActions.GET_BORROWED,\n    payload:  uid \n  }\n}\nexport const updateDataBase = (state: initialRequestsStateInterface): updateDataBaseInterface => {\n  return { type: FbDataActions.UPDATE_REQUESTS,\n    payload: state\n  }\n}\nexport const borrowReturn = (id: string, uid: string, status: boolean):\n  borrowReturnInterface => {\n  return { type: usersActions.BORROW_RETURN,\n    payload: { id, uid, status }\n  }\n}\nexport const updateUserPrivlidge = (id: string, admin: boolean): updateUserPrivlidgeInterface => {\n  return { type: usersActions.CHANGE_STATUS,\n    payload: { id, admin }\n  }\n}\nexport const checkAdminPriv = (payload: string): checkAdminPrivInterface => {\n  return { type: usersActions.CHECK_ADMIN_PRIV,\n          payload\n  }\n}\n\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit'\nimport type { RootState } from '../../appStore/store'\n\ninterface  addFormInterface {\n  author: string\n  title: string\n  img: string\n  ISBN: string\n}\n\nexport enum FormInputEnum {\n  author = 'author',\n  title = 'title',\n  img = 'img',\n  ISBN = 'ISBN'\n}\n\nconst initialState: addFormInterface = {\n  author: '',\n  title: '',\n  img: '',\n  ISBN: ''\n}\nexport const addFormState = createSlice({\n  name: 'addNewPositionForm',\n  initialState,\n  reducers: {\n    changeAuthor: (state, action: PayloadAction<string>): void => {\n      state.author = action.payload\n    },\n    changeTitle: (state, action: PayloadAction<string>): void => {\n      state.title = action.payload\n    },\n    changeImg: (state, action: PayloadAction<string>):void => {\n      state.img = action.payload\n    },\n    changeISBN: (state, action: PayloadAction<string>):void => {\n      state.ISBN = action.payload\n    } \n  }\n}\n)\n\n\nexport const { changeISBN, changeAuthor, changeTitle, changeImg } = addFormState.actions\n\nexport const selectAddForm = (state: RootState) => state.addFormState\n\nexport default addFormState.reducer\n","import { StyledA } from '../Styled/Styled'\nimport { useAppSelector } from '../../appStore/hooks'\nimport { getUser } from '../../slices/user/user'\nimport { logOut } from '../../firebase/firebase-config'\nimport { useAppDispatch } from '../../appStore/hooks'\nimport { setState } from '../../slices/books/booksSlice'\nimport {sendError} from '../../sagas/actions'\n\nconst LogMenu = () => {\n    const dispatch = useAppDispatch()\n    const { id, email } = useAppSelector(getUser)\n    const handleSignOut = () => {\n        try{\n        logOut()\n        dispatch(setState([]))\n        } catch (e) {\n            dispatch(sendError({\n                alert: 'error',\n                message: 'Error durring singout'\n                })\n            )\n        }\n    }\n    return (\n    <>\n        {\n    id && email\n        ?<>\n    <StyledA to='/account'> Account </StyledA>\n    <StyledA \n            className='login'\n            to='/home'\n            onClick={handleSignOut}\n    > LogOut </StyledA>\n        </>\n        :<>\n    <StyledA className='login' to='/login'> Login </StyledA>\n    <StyledA className='login' to='/register'> Register </StyledA>\n        </>\n\n        }\n    </>\n    )\n}\n\nexport default LogMenu\n","import styled from 'styled-components' \nimport ThemeSwitcher from './ThemeSwitcher'\nimport LogMenu from './LogMenu'\nimport { StyledA } from '../Styled/Styled'\nimport { useAppSelector } from '../../appStore/hooks'\nimport { getUser } from '../../slices/user/user'\n\n\nconst NavContainer = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  width: 100%;\n  min-height: var(--nav-height);\n  background: var(--main-color);\n  color: var(--main-header-font-color);\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  padding: auto 5%;\n  margin: 0;\n  h1 {\n    font-family: var(--logo-font);\n    color: var(--main-header-font-color);\n    font-size: 3.2rem;\n  }\n  div {\n    display: flex;\n    align-items: center;\n  }\n`\n\nconst Navigation = () => {\n  const { email, admin } = useAppSelector(getUser)\n  return(\n  <NavContainer>\n    <h1>{ admin ? `Admin account` : 'Bookler' }</h1>\n    <div>\n    <StyledA to='/home'> Home </StyledA>\n      {\n      email?\n        <p>{email}</p>:\n    <StyledA to='/browse'> Browse </StyledA>\n      }\n    <LogMenu />\n    <ThemeSwitcher />\n    </div>\n\n  </NavContainer>\n  )}\n\n\nexport default Navigation\n","import styled from 'styled-components'\n\nconst WelcomeScreen = styled.div`\n  background: var(--bg-color);\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  h1 { \n    font-size: 7rem;\n    font-family: var(--logo-font);\n  }\n  p {\n    font-size: 1.3em;\n  }\n`\n\nconst Welcome = () =>{\n  return (\n    <WelcomeScreen>\n      <h1>Welcomek to Bookler</h1>\n      <p>HI, hello yeti yatha.. etc. Browse for your books</p>\n      </WelcomeScreen>\n  )\n}\n\nexport default Welcome\n","import styled from 'styled-components'\nimport { Icon } from '@iconify/react'\n\n\nexport const ImgContainer = styled.div`\n  width: 150px;\n  height: 150px;\n  overflow: hidden;\n  margin-right: 2.5rem;\n  transition: .4s;\n  &:hover{\n    margin-right: 5rem;\n    overflow: visible;\n  }\n`\nexport const Cover = styled.img`\n  width: 150px;\n  transition: all .4s;\n  &:hover{\n    width: 200px;\n    transform: translateY(-40%);\n  }\n`\n\nexport const NoImgIcon = styled(Icon)`\n  width: 100%;\n  height: 100%;\n  color: var(--main-error-color);\n`\n\ninterface Props {\n    title: string\n    image?: string\n}\n\nconst ImgScreener: React.FC<Props>= ({ image, title }) => {\n    return (\n        <ImgContainer>\n            { \n            image ?\n            <Cover src={image} alt={`Cover: ${title}`} />:\n            <NoImgIcon icon='carbon:no-image' />\n            }\n        </ImgContainer>\n    )     \n}\nexport default ImgScreener\n","import {BookInterface} from \"../../../constants/interface/bookSlice\"\n\n\n\nconst EntryPanel: React.FC<BookInterface> = props => {\n  let { title, authors} = props\n  return(\n    <div>\n      <h3>{title}</h3>\n      <p>{authors.join(', ')}</p>\n    </div>\n  )\n}\n\nexport default EntryPanel\n","import styled from 'styled-components'\nimport ImgScreener from '../ImgScreener/ImgScreener'\nimport EntryPanel from '../EntryPanel/EntryPanel'\nimport {BookInterface} from '../../../constants/interface/bookSlice'\nimport {useAppSelector} from '../../../appStore/hooks'\nimport {getUser} from '../../../slices/user/user'\n\nconst Container = styled.div`\n  display: flex;\n  & > * {\n    margin: auto 2em;\n  }\n  h3 {\n    font-size: 1.5rem;\n  }\n  p{\n    font-size: 1rem;\n  }\n\n`\n\nconst EntryData: React.FC<BookInterface> = props => {\n  const { admin } = useAppSelector(getUser)\n  const { id, title, cover } = props\n  return (\n  <Container>\n  <ImgScreener\n    title={title}\n    image={cover}\n  />\n  {\n    admin &&  <h4>ID: {id}</h4>\n  }\n  <EntryPanel\n    {...props}\n  />\n  </Container>\n  )\n\n}\n\nexport default EntryData\n","\nimport { createSlice, PayloadAction } from '@reduxjs/toolkit'\nimport type { RootState } from '../../appStore/store'\nimport {BookInterface} from '../../constants/interface/bookSlice'\n\n\nexport interface initialRequestsStateInterface {\n  toAdd: BookInterface[]\n  toDelete: BookInterface[]\n  length: number\n}\nconst initialState: initialRequestsStateInterface = {\n  toAdd: [],\n  toDelete: [],\n  length: 0\n}\n\nconst requests = createSlice({\n  name: 'currentRequests',\n  initialState,\n  reducers:{\n    addToAdd: (state, action: PayloadAction<BookInterface>) =>{\n      state.toAdd.push(action.payload)\n      state.length++\n      sessionStorage.setItem('toAdd', JSON.stringify(state.toAdd));\n    },\n    addToDelete: (state, action: PayloadAction<BookInterface>) =>{\n      state.toDelete.push(action.payload)\n      state.length++\n      sessionStorage.setItem('toDelete', JSON.stringify(state.toDelete));\n    },\n    removeToAdd: (state, action: PayloadAction<string>) =>{\n      state.toAdd = state.toAdd.filter(item => item.id !== action.payload)\n      state.length--\n      sessionStorage.setItem('toAdd', JSON.stringify(state.toAdd));\n    },\n    removeToDelete: (state, action: PayloadAction<string>) =>{\n      state.toDelete = state.toDelete.filter(item => item.id !== action.payload)\n      state.length--\n      sessionStorage.setItem('toDelete', JSON.stringify(state.toDelete));\n    },\n      emptyRequests: state => {\n        state.toAdd = []\n        sessionStorage.setItem('toAdd', JSON.stringify(state.toAdd));\n        state.toDelete = []\n        sessionStorage.setItem('toDelete', JSON.stringify(state.toDelete));\n        state.length = 0\n      }\n  }\n})\n\nexport const {\n  addToAdd,\n  addToDelete,\n  removeToAdd,\n  removeToDelete, \n  emptyRequests\n} = requests.actions\n\nexport const getRequests = (state: RootState) => state.requests\nexport const reqLength = (state: RootState) => state.requests.length\n\nexport default requests.reducer\n","import styled from 'styled-components'\nimport EntryData from './EntryData/EntryData'\nimport { Link } from 'react-router-dom'\nimport { useAppDispatch, useAppSelector } from '../../appStore/hooks'\nimport { BookInterface } from '../../constants/interface/bookSlice'\nimport {addToDelete} from '../../slices/requests/requestsSlice'\nimport {getUser} from '../../slices/user/user'\nimport Button from '@mui/material/Button'\nimport {sendError} from '../../sagas/actions'\n\nexport const StyledEntry = styled.div`\n  display: flex;\n  justify-content: space-between;\n  padding: .9em 1.3em;\n  margin: 0 1.2em 1.2em;\n  border-radius: 15px;\n  background: var(--secondary-color);\n  & > * {\n    margin: auto 2em;\n  }\n  h3 {\n    font-size: 1.5rem;\n  }\n  p{\n    font-size: 1rem;\n  }\n`\nconst StyledLink = styled(Link)`\n  border-radius: 10px;\n  text-decoration: none;\n  display: inline-block;\n  border: none;\n  font-size: 1.3rem;\n  margin: auto .5em;\n  padding: .2em .4em;\n  background: var(--main-color);\n  color: var(--main-button-font-color);\n  cursor: pointer;\n`\n\nconst BookEntry: React.FC<BookInterface> = props => {\n  const { id, available } = props\n  const { admin } = useAppSelector(getUser)\n  const dispatch = useAppDispatch()\n\n  const handleClick = () => {\n    dispatch(addToDelete(props))\n    dispatch(sendError({\n      alert: 'error',\n      message: 'Book addet to delete requests'\n    }))\n  }\n  \n  return(\n<StyledEntry>\n  <EntryData {...props}/>\n  <div>\n  { \n  admin ?  <Button \n    color=\"error\"\n    variant=\"contained\"\n    onClick={handleClick}>Delete Entry</Button>:\n   available?\n  <StyledLink to={`/account/borrow/${id}`}>Borrow It!</StyledLink> :\n  <Button\n  variant=\"contained\" disabled>Unavailable</Button>\n  }\n  </div>\n</StyledEntry>\n  )\n}\n\nexport default BookEntry\n","import BookEntry from '../components/BookEntry/BookEntry'\nimport { BookInterface } from '../constants/interface/bookSlice'\n\n\nexport const toBooksList = (bookObj: BookInterface[]): JSX.Element[] => {\n  const list: JSX.Element[] = []\n  for(let entry in bookObj){\n    list.push(\n      <BookEntry \n        key={`${bookObj[entry].id}`}\n        {...bookObj[entry]}\n        />\n    )\n  }\n  return list\n}\n","import styled from 'styled-components'\nimport LogMenu from '../Navigation/LogMenu'\nimport { useAppSelector } from '../../appStore/hooks'\nimport { selectBooks } from '../../slices/books/booksSlice'\nimport { toBooksList } from '../../customFunc/Funcs'\nimport { getUser } from '../../slices/user/user'\n\nconst BrowserContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  text-align: center;\n  background: var(--secondary-color);\n  width: 100%;\n  min-height: 500px;\n  max-width: 1200px;\n  border-radius: 20px;\n  padding: 20px;\n  h1{\n    margin: 3em auto;\n  }\n`\n\nconst Browse: React.FC = () => {\n  let bookObj = useAppSelector(selectBooks)\n  let { id } = useAppSelector(getUser)\n  const list = toBooksList(bookObj)\n\n\n  return(\n    <BrowserContainer>\n      {\n        list.length > 0 || id\n        ?list\n        :\n    <div>\n      <h1>Please Login or Register to browse content...</h1>\n      <LogMenu />\n        </div>\n      }\n    </BrowserContainer>\n  )\n}\n\nexport default Browse\n\n","import { useRouteMatch } from 'react-router-dom'\nimport {useAppSelector} from '../../../appStore/hooks'\nimport {reqLength} from '../../../slices/requests/requestsSlice'\nimport {logOut} from '../../../firebase/firebase-config'\nimport { \n  StyledMenu,\n  Button,\n  LinkA,\n} from '../../Styled/Styled'\n\n\nconst AdminMenu = () => {\n  let { url } = useRouteMatch()\n  const requestsNumber = useAppSelector(reqLength)\n  const requestEvent = requestsNumber > 0 ? 'event' : ''\n\n  return (\n    <StyledMenu>\n    <LinkA to={`${url}`}>Browse</LinkA>\n    <LinkA to={`${url}/add`}>Add entry</LinkA>\n    <LinkA className={requestEvent} to={`${url}/requests`}>\n      Requests { requestsNumber > 0 && `${requestsNumber}` }\n    </LinkA>\n    <LinkA to={`${url}/show_users`}>Users</LinkA>\n    <Button onClick={logOut}>Logout</Button>\n    </StyledMenu>\n  )\n\n}\n\n\nexport default AdminMenu\n","\nimport { createSlice, PayloadAction } from '@reduxjs/toolkit'\nimport type { RootState } from '../../appStore/store'\nimport { \n  BookInterface,\n} from '../../constants/interface/bookSlice'\n\n\nconst initialState: BookInterface[]  = []\n\nexport const foundSlice = createSlice({\n  name: 'foundEntries',\n  initialState,\n  reducers: {\n    addToFound: (state, action: PayloadAction<BookInterface>) => {\n\t\t\tstate.unshift(action.payload)\n\t\t\tif(state.length > 5) state.pop()\n    }\n  }\n}\n)\n\n\nexport const { addToFound } = foundSlice.actions\n\nexport const foundBooksSelector = (state: RootState) => state.found\n\nexport default foundSlice.reducer\n","import { DataGrid, GridRowData, GridColDef } from '@mui/x-data-grid';\nimport { createTheme, ThemeProvider } from '@mui/material/styles'\nimport { useAppDispatch, useAppSelector } from '../../../../appStore/hooks'\nimport { foundBooksSelector  } from '../../../../slices/foundEntries/foundEntries'\nimport { BookInterface } from '../../../../constants/interface/bookSlice'\nimport Button from '@mui/material/Button'\nimport type {} from '@mui/x-data-grid/themeAugmentation';\nimport {addToAdd} from '../../../../slices/requests/requestsSlice';\nimport {sendError} from '../../../../sagas/actions';\n\nconst theme = createTheme({\n  components: {\n    MuiDataGrid: {\n      styleOverrides: {\n        root: {\n          backgroundColor: 'var(--secondary-color)',\n          color: 'var(--main-font-color)',\n        },\n      },\n    },\n  },\n})\n\n\n\nconst FoundEntries = () => {\n  const dispatch = useAppDispatch()\n  const handleClick = (entry: BookInterface) => {\n    dispatch(addToAdd(entry))\n    dispatch(sendError({\n      alert: 'success',\n      message: 'Book added to requests'\n    }))\n  }\n\n  const data = useAppSelector(foundBooksSelector)\n  const rows: GridRowData[] = data.map ((item, idx) => {\n    const authors = item.authors.join(' ')\n    return { \n      'id': idx,\n      'author': authors,\n      'ISBN': item.ISBN,\n      'title': item.title,\n      'cover': item.cover\n  }})\n\n  const columns: GridColDef[] = [\n  { field: 'author', flex: 1, headerName: 'Author'},\n  { field: 'title', flex: 1, headerName: 'Title' },\n  { field: 'ISBN', flex: 1, headerName: 'ISBN' },\n  { field: 'cover', flex: 1, headerName: 'Cover',\n    renderCell: (params) => {\n      return(\n        <img src={params?.value?.toString()} width='200' alt='Cover img' />\n      )\n    }},\n  { field: 'btn', headerName: 'Add Entry',\n    renderCell: (params) => {\n      const { author, ISBN, title, cover } = params.row\n      const data = {\n        id: '',\n        authors: [ author ],\n        ISBN,\n        title,\n        cover,\n        available: true\n      }\n      return (\n        <Button\n          onClick={()=>handleClick(data)}\n          variant=\"contained\"\n          color=\"primary\"\n          size=\"small\"\n        >\n          Add\n        </Button>\n      )\n    }\n     }\n]\n\n  return (\n    <div>\n    <ThemeProvider theme={theme} >\n      <DataGrid\n        autoHeight\n        disableColumnMenu\n        disableColumnSelector\n        disableColumnFilter\n        hideFooter\n        rows={rows}\n        columns={columns} />\n    </ThemeProvider>\n    </div>\n  )\n}\n\nexport default FoundEntries\n","import styled from 'styled-components'\nimport FoundEntries from './FoundEntries'\nimport { useAppDispatch } from '../../../../appStore/hooks'\nimport { useState } from 'react'\nimport { getBook, sendError } from '../../../../sagas/actions'\n\nconst Container = styled.div`\n  background: var(--secondary-color);\n  padding: 2em;\n  border-radius: 10px;\n  display: flex;\n  flex-direction: column;\n  margin-bottom:  35px;\n  a {\n    text-decoration: none;\n  }\n  .search-bar {\n    display: flex;\n  }\n  input {\n    height: 1.8rem;\n    font-size: 1.1rem;\n    padding: 0 .4em;\n    margin: .4em;\n    &:invalid {\n      border: 2px solid var(--main-error-color);\n    }\n    }\n  label {\n    font-size: 1.2rem;\n    margin: .4em;\n  }\n  button {\n    border: none;\n    border-radius: 5px;\n    font-size: 1.1rem;\n    width: 150px;\n    background: var(--main-color);\n    color: var(--main-button-font-color);\n    margin: 1em auto;\n    }\n    #error-msg{\n      font-size: 1.3rem;\n      color: var(--main-error-color);\n      margin: .5em;\n    }\n`\n\nconst SearchApi = () => {\n  const [ISBN, setISBN] = useState<string>('')\n  const dispatch = useAppDispatch()\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>): void =>{\n    const string = e.target.value\n    if(string.match(/\\D+/)) return\n    setISBN(string)\n  }\n\n  const handleClick = () => {\n    if(ISBN.length !== 10 && ISBN.length !== 13) {\n      dispatch(sendError({\n        alert: 'error',\n        message: 'ISBN number must be 10 or 13 numbers long'\n      }))\n      return\n    }\n    dispatch(getBook(ISBN))\n  }\n\n  return(\n    <Container>\n      <div className='search-bar'>\n      <label htmlFor=\"ISBN\">\n        Search <a href='https://openlibrary.org/explore'>OpenLibrary </a>\n        by ISBN( 10 or 13 char):  \n      <input type=\"text\" onChange={handleChange} name=\"ISBN\" value={ISBN}/>\n      </label>\n      <button onClick={handleClick}>Search...</button>\n      </div>\n      <div id=\"error-msg\"></div>\n      <h2>Latest search: </h2>\n      <FoundEntries />\n    </Container>\n\n  )\n}\n\nexport default SearchApi\n","import styled from 'styled-components'\nimport SearchApi from  './SearchApi/SearchApi'\nimport { useAppDispatch, useAppSelector } from '../../../appStore/hooks'\nimport {\n  selectAddForm,\n  changeISBN,\n  changeImg,\n  changeTitle,\n  changeAuthor,\n  FormInputEnum\n} from '../../../slices/addBookForm/addBookForm'\nimport { addToFound } from '../../../slices/foundEntries/foundEntries'\n\nconst Container = styled.div`\nwidth: 90%;\ntext-align: center;\nmargin: auto;\nform {\n  background: var(--secondary-color);\n  padding: 2em;\n  border-radius: 10px;\n  display: flex;\n  flex-direction: column;\n  input {\n    height: 2rem;\n    font-size: 1.3rem;\n    padding: 0 .4em;\n    &:invalid {\n      border: 2px solid var(--main-error-color);\n    }\n  }\n  label {\n    font-size: 1.5rem;\n    margin: .4em;\n    color: var(--main-font-color);\n    }\n  button {\n    border: none;\n    border-radius: 5px;\n    font-size: 1.1rem;\n    width: 150px;\n    background: var(--main-color);\n    color: var(--main-button-font-color);\n    margin: 1em auto;\n    }\n  }\n`\n\nconst AddingForm: React.FC = () => {\n  const dispatch = useAppDispatch()\n  const { author, title, img, ISBN } = useAppSelector(selectAddForm)\n\n\n  const handleSubmit = (e:React.FormEvent<HTMLFormElement>): void => {\n    e.preventDefault()\n    if(author === '' || title === '') return\n    const data = {\n            id: '',\n            ISBN,\n            authors: [ author ],\n            title,\n            available: true,\n            cover: img\n          }\n    dispatch(addToFound(data))\n    dispatch(changeTitle(''))\n    dispatch(changeAuthor(''))\n    dispatch(changeImg(''))\n  }\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>): void => {\n    e.preventDefault()\n    const string = e.target.value\n    switch(e.target.name){\n      case FormInputEnum.author:\n        dispatch(changeAuthor(string))\n        break\n      case FormInputEnum.title:\n        dispatch(changeTitle(string))\n        break\n      case FormInputEnum.img:\n        dispatch(changeImg(string))\n        break\n      case FormInputEnum.ISBN:\n        if(string.match(/\\D+/)) return\n        dispatch(changeISBN(string))\n        break\n      default:\n        throw new Error('Something went wrong with filling the form...')\n    }\n  }\n\n  return (\n    <Container>\n      <SearchApi />\n      <form onSubmit={handleSubmit}>\n      <label htmlFor='ISBN'>ISBN</label>\n      <input type=\"text\" onChange={handleChange} name={FormInputEnum.ISBN} value={ISBN} />\n      <label htmlFor='author'>Author</label>\n      <input type=\"text\" onChange={handleChange} name={FormInputEnum.author} value={author} />\n      <label htmlFor='title'>Title</label>\n      <input type=\"text\" onChange={handleChange} name={FormInputEnum.title} value={title} />\n      <label htmlFor='img'>Cover image</label>\n      <input type=\"url\" onChange={handleChange} name={FormInputEnum.img} value={img} />\n      <button type='submit'>Add book</button>\n    </form>\n    </Container>\n        )\n}\n\n\nexport default AddingForm\n","import { \n  useAppSelector,\n  useAppDispatch\n}from '../../../appStore/hooks'\nimport { \n  getRequests,\n  removeToAdd,\n  removeToDelete\n} from '../../../slices/requests/requestsSlice'\nimport { updateDataBase } from '../../../sagas/actions'\nimport { \n  List,\n  Container\n} from '../../Styled/Styled'\nimport Button from '@mui/material/Button'\nimport Box from '@mui/material/Box'\n\nconst Requests = () => {\n  const requests = useAppSelector(getRequests)\n  const dispatch = useAppDispatch()\n  const handleRemoveReq = (idx: string, cmd: 'add' | 'del'): void => {\n    if(cmd === 'add') dispatch(removeToAdd(idx))\n    else dispatch(removeToDelete(idx))\n    \n  }\n  const handleSubmitRequests = () => {\n    dispatch(updateDataBase(requests))\n  }\n  const toDelete = requests.toDelete.map(item=> {\n    return <div key={item.id}>{`ISBN: ${item.ISBN||'none'}, \n      Title: ${item.title},\n      authors: ${item.authors.join(' ')}`}\n      <br />\n      <Button \n      color=\"error\"\n      variant=\"outlined\"\n      onClick={()=>handleRemoveReq(item.id, 'del')}>Remove Request</Button>\n      </div>\n  } )\n  const toAdd = requests.toAdd.map(item => {\n    return <div key={item.authors.join('') + item.title + item.ISBN}>{`ISBN: ${item.ISBN||'none'},\n      Title: ${item.title},\n      authors: ${item.authors.join(' ')}`}\n      <br />\n      <Button \n      color=\"error\"\n      variant=\"outlined\"\n      onClick={()=>handleRemoveReq(item.id, 'add')}>Remove Request</Button>\n      </div>\n  } )\n  return(\n    <Box textAlign='center'>\n      <Button \n        color=\"success\"\n        variant=\"contained\"\n        onClick={handleSubmitRequests}\n        sx={{\n          margin:\"15px auto\"\n      }}> Make changes to DB</Button>\n    <Container>\n      <List>\n        <h2>Books to Add</h2>\n    {toAdd}\n      </List>\n      <List>\n        <h2>Books to Delete</h2>\n    {toDelete}\n      </List><br />\n    </Container>\n    </Box>\n  )\n}\n\nexport default Requests\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit'\nimport { userInterface } from '../user/user'\nimport type { RootState } from '../../appStore/store'\n\n\ninterface initialStateInterface {\n  users: userInterface[]\n}\nconst initialState: initialStateInterface = {\n  users: []\n}\n\nconst users = createSlice({\n  name: 'Users',\n  initialState,\n  reducers:{\n    setUsers: (state, action: PayloadAction<userInterface[]>) =>{\n      state.users = action.payload\n    },\n    updateUserStatus: (state, action: PayloadAction<{id: string, admin:boolean}>) => {\n      const { id, admin } = action.payload\n      state.users.forEach(user => {\n        if(user.id === id) user.admin = admin\n      } )\n    },\n    removeUsers: (state) =>{\n      state.users = []\n    }\n  }\n})\n\nexport const { setUsers, updateUserStatus } = users.actions\n\nexport const getUsersData = (state: RootState) => state.usersData.users\n\nexport default users.reducer\n","import styled from 'styled-components'\nimport {useAppDispatch, useAppSelector} from '../../../appStore/hooks'\nimport {getUsersData} from '../../../slices/usersData/user'\nimport { Container } from '../../Styled/Styled'\nimport Button from '@mui/material/Button'\nimport {updateUserPrivlidge} from '../../../sagas/actions'\n\n\nconst UserContainer = styled.div`\n  border: 2px solid var(--main-color);\n  min-width: 350px;\n  width: 30%;\n  border-radius: 5px;\n  padding: 20px;\n  margin: 1em auto;\n  p {\n    margin: .5em\n  }\n`\n\n\nconst Users = () => {\n  const users = useAppSelector(getUsersData)\n  const dispatch = useAppDispatch()\n  const usersList = users.map(item =>(\n    <UserContainer key={item.id}>\n      <p>Id: {item.id}</p>\n      <p>Email: {item?.email ?? 'None'}</p>\n      <p>Admin permison: {item.admin?'true':'false'}</p>\n      {\n        item.admin?\n          <Button \n          color=\"secondary\"\n            onClick={()=>{\n              dispatch(updateUserPrivlidge(item.id!,false))\n            }}\n          >\n          Take admin rights\n          </Button>:\n          <Button\n          color=\"success\"\n            onClick={()=>{\n              dispatch(updateUserPrivlidge(item.id!,true))\n            }}\n          >\n          Give admin rights\n          </Button>\n\n\n      }\n    </UserContainer>\n  ))\n  return(\n    <Container>\n    {usersList}\n    </Container>\n  )\n}\n\nexport default Users\n","import AdminMenu from './AdminMenu'\nimport AddingForm from './AddingForm'\nimport Requests from './Requests'\nimport Users from './Users'\nimport { toBooksList } from '../../../customFunc/Funcs'\nimport { useAppSelector } from '../../../appStore/hooks'\nimport { selectBooks } from '../../../slices/books/booksSlice'\nimport {\n  List,\n  PanelGrid\n} from '../../Styled/Styled'\nimport {\n  Switch,\n  Route,\n  useRouteMatch\n} from 'react-router-dom'\n\n\nconst AdminPanel: React.FC = () =>{\n  let match = useRouteMatch()\n  const booksObj = useAppSelector(selectBooks)\n  const list = toBooksList(booksObj)\n  \n  return(\n  <PanelGrid>\n      <AdminMenu />\n    <Switch>\n      <Route path={`${match.path}/add`}>\n        <AddingForm />\n      </Route>\n      <Route path={`${match.path}/show_users`} >\n        <Users />\n      </Route>\n      <Route path={`${match.path}/requests`} >\n        <Requests />\n      </Route>\n      <Route path={`${match.path}`} exact>\n      <List>\n        {list}\n      </List>\n      </Route>\n    </Switch>\n    </PanelGrid>\n  )\n}\nexport default AdminPanel\n\n","import type { RootState } from '../../appStore/store'\nimport { \n\tcreateSlice,\n\tPayloadAction\n} from '@reduxjs/toolkit'\n\nconst initialState: {list: string[]} = {\n\tlist: []\n}\n\nexport const borrowedList = createSlice({\n\tname: 'borrowedBooks',\n\tinitialState,\n\treducers: {\n    saveMyBorrowed: (state, action: PayloadAction<string[]>) => {\n\t\t\tstate.list = action.payload\n    },\n\t\taddMyBorrowed: (state, action: PayloadAction<string>) =>{\n\t\t\tstate.list.push(action.payload)\n\t\t},\n\t\tremoveMyBorrowed: (state, action: PayloadAction<string>) =>{\n\t\t\tstate.list = state.list.filter(item => item !== action.payload )\n\t\t}\n}\n})\n\n\nexport const { saveMyBorrowed, removeMyBorrowed, addMyBorrowed } = borrowedList.actions\n\nexport const selectBorrowedBooks = (state: RootState) => state.borrowedBooks.list\nexport const selectBorrowedBooksLength = (state: RootState) => state.borrowedBooks.list.length\n\nexport default borrowedList.reducer\n","import { useRouteMatch } from 'react-router-dom'\nimport {useAppSelector} from '../../../appStore/hooks'\nimport { selectBorrowedBooksLength } from '../../../slices/borrowedBooks/borrowedBooks'\nimport {logOut} from '../../../firebase/firebase-config'\nimport { StyledMenu, \n  Button,\n  LinkA\n} from '../../Styled/Styled'\n\nconst UserMenu = () => {\n  let match = useRouteMatch()\n  const myBorrowedLength = useAppSelector(selectBorrowedBooksLength)\n  const linkColor = myBorrowedLength > 0 ? 'event' : ''\n  return (\n    <StyledMenu>\n    <LinkA to={`${match.url}`}>Browse</LinkA>\n    <LinkA className={linkColor} to={`${match.url}/borrowed`}>\n      My Borrowed {myBorrowedLength > 0 ? `${myBorrowedLength}`:''}</LinkA>\n    <Button onClick={logOut}>Log out</Button>\n    </StyledMenu>\n  )\n\n}\n\n\nexport default UserMenu\n","import styled from 'styled-components'\nimport { useParams } from 'react-router-dom'\nimport { NoImgIcon } from '../../../BookEntry/ImgScreener/ImgScreener'\nimport { BookInterface } from '../../../../constants/interface/bookSlice'\nimport { useAppSelector, useAppDispatch } from '../../../../appStore/hooks'\nimport { getUser } from '../../../../slices/user/user'\nimport { borrowReturn } from '../../../../sagas/actions'\nimport { selectBooks } from '../../../../slices/books/booksSlice'\nimport Button from '@mui/material/Button'\n\nconst Container = styled.div`\n  background: var(--secondary-color);\n  border-radius: 15px;\n  padding: 2rem;\n  margin: auto 3em;\n  display: grid;\n  grid-template-columns: 300px 1fr;\n`\n\nconst ImgContainer = styled.div`\n  width: 300px;\n  grid-column; 1;\n  img{\n    width: 100%;\n  }\n`\nconst TextContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: space-evenly;\n  grid-area: 1/2;\n  padding: 2em;\n`\n\ninterface Params {\n  id?: string\n}\n\nconst BorrwoBook = () => {\n  const dispatch = useAppDispatch()\n  const user = useAppSelector(getUser)\n  const BOOKS = useAppSelector<BookInterface[]>(selectBooks)\n  let { id } = useParams<Params>()\n  if(!id) return <h2>No such book index</h2>\n  if(!user) return <h2> You must be logged in to borrow a book </h2>\n  const book = BOOKS.find(item => item.id === id)\n  if(book === undefined) return <h1>Something went wrong...</h1>\n  const { available, cover, title, authors } = book!\n\nconst handleClick = (): void => {\n  dispatch(borrowReturn(id!, user.id!, !available))\n}\n  return(\n    <Container>\n    <ImgContainer>\n      { \n          cover?\n        <img src={cover} alt='cover' /> :\n        <NoImgIcon icon='carbon:no-image' />\n      }\n    </ImgContainer>\n    <TextContainer>\n      <div>\n      <h2>{title}</h2>\n        <h3>{authors.join(' ')}</h3>\n      </div>\n      {\n        available?\n          <Button \n            onClick={handleClick}\n            variant=\"contained\"\n            sx={{\n              background: 'var(--main-color)',\n              color: 'var(--main-button-font-color)'\n            }}\n            >\n            Borrow it\n          </Button> :\n      <Button variant=\"contained\" disabled>Unavailable</Button>\n      }\n    </TextContainer>\n    </Container>\n  )\n\n}\n\nexport default BorrwoBook\n","\nimport { BookInterface } from '../../constants/interface/bookSlice'\nimport { createSlice, PayloadAction } from '@reduxjs/toolkit'\nimport type { RootState } from '../../appStore/store'\n\n\ninterface stateInterface {\n  book: {\n  authors: string\n  title: string\n  cover: string\n  ISBN: string\n  open: boolean\n  }\n}\n\nconst initialState: stateInterface = {\n  book: {\n    authors: '',\n    title: '',\n    cover: '',\n    ISBN: '',\n    open: false\n  }\n}\n\nexport const currentRead = createSlice({\n  name: 'currentReadBook',\n  initialState,\n  reducers: {\n    setCurrentRead: (state, action: PayloadAction<BookInterface>) => {\n      const { authors, title, cover, ISBN } = action.payload\n      state.book = {\n        authors: authors.join(', '),\n        title,\n        cover,\n        ISBN,\n        open: true\n      }\n    },\n    closeWindow: state => {\n      state.book.open = false\n    }\n  }\n}\n)\n\n\nexport const { setCurrentRead, closeWindow } = currentRead.actions\n\nexport const getCurrentRead = (state: RootState) => state.currentRead.book\n\nexport default currentRead.reducer\n","import styled from 'styled-components'\nimport { selectBorrowedBooks } from '../../../../slices/borrowedBooks/borrowedBooks'\nimport Button from '@mui/material/Button'\nimport { Container } from '../../../Styled/Styled'\nimport { \n  useAppSelector,\n  useAppDispatch\n} from '../../../../appStore/hooks'\nimport {selectBooks} from '../../../../slices/books/booksSlice'\nimport { borrowReturn } from '../../../../sagas/actions'\nimport {getUser} from '../../../../slices/user/user'\nimport {setCurrentRead} from '../../../../slices/currentBook/currentBook'\n\nconst EntryContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: space-evenly;\n  min-height: 250px;\n`\n\nconst BorrowedBooks = () => {\n  const dispatch = useAppDispatch()\n  let borrowedBooksIds = useAppSelector(selectBorrowedBooks)\n  const user = useAppSelector(getUser)\n  const Books = useAppSelector(selectBooks)\n  if(borrowedBooksIds.length === 0) return <Container><h1>No Books borrowed</h1></Container>\n\n  //hash bookentries to get O(1) time search after O(n) time hashing all books\n  let hash: { [key: string]: number } = {}\n  for(let i in Books) hash[Books[i].id] = +i\n\n  const handleClick =(id: string) => {\n    dispatch(borrowReturn(id, user.id!, true))\n  }\n\n  const list: JSX.Element[] = []\n  for(let entry of borrowedBooksIds) {\n  const id = entry\n  if(!hash[id]) {\n    list.push(\n      <EntryContainer key={id}>\n        {'Book has been deleted'}\n        <Button \n          onClick={()=>handleClick(id)}\n          variant=\"contained\"\n          sx={{\n            background: 'var(--main-color)',\n            color: 'var(--main-button-font-color)'\n          }}\n          >\n          Delete borrowed entry\n        </Button> \n      </EntryContainer>\n    )\n    continue\n  }\n  const { title, authors } = Books[hash[id]]\n    list.push(\n    <EntryContainer key={id}>\n        <h2>{title}</h2>\n        <h3>{authors.join(', ')}</h3>\n      <Button\n        variant=\"contained\"\n        onClick={()=>dispatch(setCurrentRead(Books[hash[id]]))}\n        sx={{\n          background: 'var(--main-color)',\n          color: 'var(--main-button-font-color)'\n        }}\n      >\n        Read\n      </Button>\n      <Button \n        onClick={()=>handleClick(id)}\n        variant=\"contained\"\n        sx={{\n          background: 'var(--main-color)',\n          color: 'var(--main-button-font-color)'\n        }}\n        >\n        Return\n      </Button> \n    </EntryContainer>)\n   }\n     \n  return(\n    <Container>\n     {list}\n    </Container>\n  )\n\n}\n\nexport default BorrowedBooks\n","import UserMenu from './UserMenu'\nimport BorrowBook from './BorrowBook/BorrowBook'\nimport BorrowedBooks from './BorrowedBooks/BorrowedBooks'\nimport { useAppSelector } from '../../../appStore/hooks'\nimport { selectBooks } from '../../../slices/books/booksSlice'\nimport { toBooksList } from '../../../customFunc/Funcs'\nimport { \n  Switch,\n  useRouteMatch,\n  Route\n} from 'react-router-dom'\nimport {\n  List,\n  PanelGrid\n} from '../../Styled/Styled'\n\n\nconst UserPanel: React.FC = () =>{\n  let { url } = useRouteMatch()\n  let booksObj = useAppSelector(selectBooks)\n  const list = toBooksList(booksObj)\n\n  return(\n    <PanelGrid>\n    <UserMenu />\n    <Switch>\n      <Route exact path={url} >\n      <List>\n        {list}\n      </List>\n      </Route>\n      <Route path={`${url}/borrow/:id`}>\n        <BorrowBook />\n      </Route>\n      <Route path={`${url}/borrowed`}>\n        <BorrowedBooks />\n      </Route>\n    </Switch>\n    </PanelGrid>\n  )\n}\nexport default UserPanel\n\n","import AdminPanel from './AdminPanel/AdminPanel'\nimport UserPanel from './UserPanel/UserPanel'\nimport { useAppSelector } from '../../appStore/hooks'\nimport { getUser } from '../../slices/user/user'\nimport { Redirect } from 'react-router-dom'\n\n\nconst AccountPanel:React.FC = () =>{\n  const { id, email, admin } = useAppSelector(getUser)\n  \n  if(!id || !email) return <Redirect to='/home' />\n  if(admin) return <AdminPanel />\n  return <UserPanel />\n}\n\nexport default AccountPanel\n","import TextField from '@mui/material/TextField'\nimport Button from '@mui/material/Button'\nimport styled from 'styled-components'\nimport { \n  signIn,\n  createUser\n} from '../../firebase/firebase-config'\nimport { useHistory } from 'react-router-dom'\nimport { useState } from 'react'\nimport {sendError} from '../../sagas/actions'\nimport {useAppDispatch} from '../../appStore/hooks'\nimport {changeIsLoading} from '../../slices/components/components'\n\nconst StyledForm = styled.form`\n  background: white;\n  border-radius: 10px;\n  padding: 8em;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n`\ninterface Props {\n  reg?: boolean\n}\n\nconst LoginForm: React.FC<Props> = ( { reg } ) => {\n  const dispatch = useAppDispatch()\n  const history = useHistory()\n  const [email, setEmail] = useState<string>('')\n  const [pass1, setPass1] = useState<string>('')\n  const [pass2, setPass2] = useState<string>('')\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = e.target\n    if(name === 'email') setEmail(value)\n    if(name === 'pass1') setPass1(value)\n    if(name === 'pass2') setPass2(value)\n  }\n  const handleSubmit = async () => {\n    try {\n        dispatch(changeIsLoading(true))\n        if(reg && pass2) {\n            await createUser(email, pass1)\n            dispatch(sendError({\n              alert: 'success',\n              message: 'User created'\n            }))\n        } else await signIn(email,pass1)\n        setEmail('')\n        setPass1('')\n        setPass2('')\n        history.push('/account')\n    } catch (e) {\n        let error = 'Error during signIn'\n        if(e instanceof Error) error = e.message\n        dispatch(sendError({\n          alert: 'error',\n          message: error\n        }))\n        dispatch(changeIsLoading(false))\n    } \n  }\n  return(\n    <StyledForm>\n      <TextField \n        label=\"Email\" \n        margin=\"normal\"\n        variant=\"standard\"\n        type=\"email\"\n        name='email'\n        value={email}\n        onChange={handleChange}\n        required\n      />              \n      <TextField\n        label=\"Password\"\n        margin=\"normal\"\n        variant=\"standard\"\n        type=\"password\"\n        name='pass1'\n        value={pass1}\n        onChange={handleChange}\n        required\n      />\n      {\n        reg&&\n        <TextField\n          label=\"Retype Password\"\n          margin=\"normal\"\n          variant=\"standard\"\n          type=\"password\"\n          name='pass2'\n          value={pass2}\n          onChange={handleChange}\n          required\n        />\n      }\n      <Button\n          variant=\"contained\"\n          color=\"primary\"\n          onClick={handleSubmit}\n      >\n      {reg?'Register':'SignIn'}\n      </Button>\n\n    </StyledForm>\n  )\n}\n\nexport default LoginForm\n","import Welcome from '../Welcome/Welcome'\nimport Browse from '../Browse/Browse'\nimport AccountPanel from '../AccountPanel/AccountPanel'\nimport LoginForm from '../LoginForm/LoginForm'\nimport { Switch, Route } from 'react-router-dom'\n\nconst MainContent = () => {\n  return(\n      <Switch>\n        <Route path='/browse'>\n          <Browse />\n          </Route>\n        <Route path='/account'>\n          <AccountPanel />\n          </Route>\n        <Route path='/home'>\n          <Welcome />\n        </Route>\n        <Route path='/login'>\n          <LoginForm />\n        </Route>\n        <Route path='/register'>\n          <LoginForm reg />\n        </Route>\n        <Route path='/someRandomLibrary' exact>\n          <Welcome />\n          </Route>\n        <Route path='/' exact>\n          <Welcome />\n          </Route>\n        <Route path='*'>\n          <h1>Error 404 route does not exist</h1>\n          </Route>\n      </Switch>\n  )\n}\n\nexport default MainContent\n","import { createGlobalStyle } from 'styled-components'\nimport { ThemeType } from '../../slices/components/components'\n\ninterface StyleProps {\n\tdark: ThemeType\n}\n\nconst GlobalStyle = createGlobalStyle<StyleProps>`\n:root {\n\t--logo-font: 'Pacifico', cursive;\n\t--normal-font: 'Fira Sans Condensed', sans-serif;\n\n  --main-color: ${props => props.dark === ThemeType.dark ? 'hsl(243, 50%, 5%)' : 'hsl(243,100%,30%)'};\n\t--secondary-color: ${props => props.dark === ThemeType.dark ? 'hsl(243,30%,20%)' : 'hsl(243,50%,80%)'}; \n  --bg-color: ${props => props.dark === ThemeType.dark ? 'hsl(243, 40%, 10% )' : 'hsl(0,0%,100%)' };\n\t--main-error-color: ${props => props.dark === ThemeType.dark ? 'hsl(0, 75%, 30% )' : 'hsl(0,100%,50%)' };\n\n  --main-header-font-color: ${props => props.dark === ThemeType.dark ? 'hsl(0, 0%,70%)': 'hsl(0,0%,100%)' };\n  --main-button-font-color: ${props => props.dark === ThemeType.dark ? 'hsl(0, 0%,70%)': 'hsl(0,0%,100%)' };\n  --main-font-color: ${props => props.dark === ThemeType.dark ? 'hsl(0,0%,70%)': \"hsl(0,0%,0%)\"};\n\n\n\t--nav-height: 75px;\n}\n* {\n  box-sizing: border-box;\n\tpadding:0;\n\tmargin: 0;\n\ttransition: color, background .3s;\n}\n\nbody {\n\tbackground: var(--bg-color);\n\tfont-family: var(--normal-font);\n\tcolor: var(--main-font-color);\n\tmargin: 0;\n\tpadding: calc(var(--nav-height) + 45px) 0 0 0;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n}\n\n#root {\n\tposition: relative;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tmin-width: 100vw;\n}\n`\nexport default GlobalStyle\n","import styled from 'styled-components'\nimport { Icon } from '@iconify/react'\n\nconst StyledFooter = styled.footer`\n  display: flex;\n  justify-content: space-evenly;\n  padding: 3em 5%;\n  background: var(--main-color);\n  width: 100%;\n  bottom: 0;\n  margin: 50px 0 0;\n  div{\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    padding: .5em;\n    color: var(--main-header-font-color);\n    &>div{\n      flex-direction: row;\n    }\n    h2 {\n      margin: .6em;\n    }\n    p{\n      font-size: 1.1rem;\n      margin: 0 .3em .3em;\n      transition: .4s all;\n      &:hover{\n        opacity: .6;\n        cursor: pointer;\n        transform: translateY(-.2em);\n      }\n    }\n  }\n`\n\nconst Footer = () => {\n  return (\n    <StyledFooter>\n      <div><h2>Contact</h2>\n        <p>Email</p>\n        <p>Phone</p>\n      </div>\n      <div>\n        <h2>Not Social</h2>\n        <p>Oh i hate nma liveee</p>\n        <p>Smthing stupid</p>\n      </div>\n      <div>\n        <h2>Social</h2>\n        <div>\n          <p>\n      <Icon icon=\"akar-icons:twitter-fill\" width='30' height='30'/>\n          </p>\n          <p>\n      <Icon icon=\"bx:bxl-facebook-square\" width='30' height='30' />\n          </p>\n          <p>\n      <Icon icon=\"akar-icons:linkedin-fill\" width='30' height='30' />\n          </p>\n          <p>\n      <Icon icon=\"bx:bxl-instagram-alt\" width='30' height='30'  />\n          </p>\n        </div>\n      </div>\n\n\n\n    </StyledFooter>\n  )\n}\n\nexport default Footer\n","import Snackbar from '@mui/material/Snackbar';\nimport Alert from '@mui/material/Alert';\nimport {useAppDispatch, useAppSelector} from '../../appStore/hooks';\nimport { getSnackbarState, closeSnackbar } from '../../slices/components/components'\n\nconst AlertArea = () => {\n  const { vertical, horizontal, open, alert, message  } = useAppSelector(getSnackbarState);\n  const dispatch = useAppDispatch()\n \n  const handleClose = () => {\n    dispatch(closeSnackbar())\n  };\n\n  return (\n    <div>\n      <Snackbar\n        anchorOrigin={{ vertical , horizontal }}\n        open={open}\n        onClose={handleClose}\n        autoHideDuration={4000}\n        key={vertical + horizontal}\n      >\n       <Alert variant=\"filled\" severity={alert}>\n         {message}\n      </Alert>\n      </Snackbar>\n    </div>\n  );\n}\n\nexport default AlertArea\n","import Box from '@mui/material/Box';\nimport styled from 'styled-components'\nimport LinearProgress from '@mui/material/LinearProgress';\n\nconst ScreenShadow = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: fixed;\n  inset: 0 0 0 0;\n  background: var(--secondary-color);\n`\n\nconst LoadingScreen = () => {\n  return (\n    <ScreenShadow>\n    <Box sx={{\n      minWidth: '300px',\n      maxWidth: '1000px',\n      width: '85%'\n      }}>\n      <LinearProgress color='inherit'/>\n    </Box>\n    </ScreenShadow>\n  )\n}\n\nexport default LoadingScreen\n","import {useAppSelector, useAppDispatch} from '../../appStore/hooks'\nimport {getCurrentRead, closeWindow} from '../../slices/currentBook/currentBook'\nimport Button from '@mui/material/Button'\nimport styled from 'styled-components'\n\n\nconst ReadContainer = styled.div`\n  display: flex;\n  justify-content: center;\n  position: fixed;\n  inset: 100px 150px;\n  padding: 3em 5em;\n  background: var(--secondary-color);\n  border-radius: 10px;\n  & > img {\n    width: 30%;\n  }\n  & > div {\n    *{\n      margin: 1em 0;\n    }\n    padding: 2em;\n    width: 60%;\n    display: flex;\n    flex-direction: column;\n  }\n`\n\nconst ReadBookContainer = () => {\n  const { ISBN, authors, title, cover } = useAppSelector(getCurrentRead)\n  const dispatch = useAppDispatch()\n  return (\n    <ReadContainer>\n      <img src={cover} alt=\"Book Cover\" />\n      <div>\n        <Button\n          variant=\"contained\"\n          color=\"error\"\n          onClick={()=>{dispatch(closeWindow())}}\n        >\n        Close\n        </Button>\n      <h1>{title}</h1>\n      <h2>{authors}</h2>\n      <h3>ISBN: {ISBN}</h3>\n      <p>\n        {\n        'jskdhfsahf;alshdfncxne\\nasdhfashdfasdhfasldhfsadh' +\n        'sdfhsjdhfkjashdfj' +\n        'jskdhfsahf;alshdfncxne\\nasdhfashdfasdhfasldhfsadh' +\n        'sdfhsjdhfkjashdfj' +\n        'jskdhfsahf;alshdfncxne\\nasdhfashdfasdhfasldhfsadh' +\n        'sdfhsjdhfkjashdfj' +\n        'jskdhfsahf;alshdfncxne\\nasdhfashdfasdhfasldhfsadh' +\n        'sdfhsjdhfkjashdfj' +\n        '\\nEND'\n        }\n      </p>\n      </div>\n    </ReadContainer>\n  )\n}\n\nexport default ReadBookContainer\n","import Navigation from './components/Navigation/Navigation'\nimport MainContent from './components/MainContent/MainContent'\nimport GlobalStyle from './components/Styled/GlobalStyle'\nimport Footer from './components/Footer/Footer'\nimport AlertArea from './components/AlertArea/AlertArea'\nimport LoadingScreen from './components/LoadingScreen/LoadingScreen'\nimport './App.css'\nimport styled from 'styled-components'\nimport { auth } from './firebase/firebase-config'\nimport { onAuthStateChanged } from 'firebase/auth'\nimport { useEffect } from 'react'\nimport { useAppSelector, useAppDispatch } from './appStore/hooks'\nimport { onUserChange } from './slices/user/user'\nimport { selectTheme } from './slices/components/components'\nimport { selectIsLoading } from './slices/components/components'\nimport { \n  getFirebaseData,\n  emptyFirebaseData,\n  checkAdminPriv,\n} from './sagas/actions'\nimport ReadBookContainer from './components/ReadBookContainer/ReadBookContainer'\nimport {getCurrentRead} from './slices/currentBook/currentBook'\n\n\nconst Container = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n  width: 90%;\n\tmin-height: 65vh;\n`\n\nfunction App() {\n  const theme = useAppSelector(selectTheme)\n  const isLoading = useAppSelector(selectIsLoading)\n  const currentBook = useAppSelector(getCurrentRead)\n  const dispatch = useAppDispatch()\n\n\n  useEffect (() => onAuthStateChanged(auth, user => {\n    const payload = {\n      id: user ? user.uid : null,\n      email: user ? user.email : null\n    } \n    dispatch(onUserChange(payload))\n    if(user) {\n      dispatch(getFirebaseData())\n      dispatch(checkAdminPriv(user.uid))\n    }\n    else {\n      dispatch(emptyFirebaseData())\n    }\n  })\n  , []) \n\n\n  return (<>\n    <GlobalStyle dark={theme} />\n    <AlertArea />\n    <Navigation />\n      <Container role='main'>\n        <MainContent />\n      </Container>\n    <Footer />\n    {currentBook.open && <ReadBookContainer />}\n    {isLoading && <LoadingScreen />}\n  </>\n         )\n}\n\nexport default App;\n","import {\n\tall,\n\tcall,\n\tput,\n\ttakeEvery,\n\ttakeLatest,\n\tEffect,\n\tStrictEffect\n} from 'redux-saga/effects'\nimport { addToFound } from '../slices/foundEntries/foundEntries'\nimport {\n\tsaveBook,\n\tsendError\n} from './actions'\nimport { getBookActions } from './actionTypes/actions'\n\ninterface OpenLibResponse {\n\t[key: string] : DataInterface\n}\ninterface DataInterface {\n\tby_statement: string\n\ttitle: string\n\tcover: {\n\t\tsmall: string\n\t\tmedium: string\n\t\tlarge: string\n\t}\n}\n\n\nexport function* getBookSaga(){\n\tconsole.log('getBookSaga')\n\tyield all([getBookWatcher()])\n}\nfunction* getBookWatcher(){\n\tconsole.log('getBookWatcherTriggered')\n\tyield takeLatest(getBookActions.GET_BOOK, getBookWorker)\n\tyield takeEvery(getBookActions.SAVE_BOOK, saveBookWorker)\n}\n\nfunction* getBookWorker(action: Effect)\n\t: Generator<StrictEffect, void, OpenLibResponse>{\n\tconsole.log('getBookWorkerTriggered')\n\ttry {\n\t\t\tconst data: OpenLibResponse = yield call(fetchBook, action.payload)\n\t\t\tif(Object.keys(data).length === 0) {\n\t\t\t\tyield put(sendError({\n\t\t\t\t\talert:'warning',\n\t\t\t\t\tmessage: 'Recived empty response, probably wrong ISBN'\n\t\t\t\t}))\n\t\t\t} else {\n\t\t\tconst key = `ISBN:${action.payload}`\n\t\t\tconst { by_statement: author, title, cover } = data[key]\n\t\t\tlet coverImg = ''\n\t\t\tif(cover?.large) coverImg = cover.large\n\t\t\telse if(cover?.medium) coverImg = cover.large\n\t\t\telse if(cover?.small) coverImg = cover.large\n\t\t\tyield put(saveBook({\n\t\t\t\t\t\t\t\t\t\t\tid: '',\n\t\t\t\t\t\t\t\t\t\t\tauthors: [author],\n\t\t\t\t\t\t\t\t\t\t\ttitle,\n\t\t\t\t\t\t\t\t\t\t\tISBN: action.payload,\n\t\t\t\t\t\t\t\t\t\t\tavailable: true,\n\t\t\t\t\t\t\t\t\t\t\tcover: coverImg\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t ) \n\t}\n\t} catch (error) {\n\t\tconsole.log(error)\n\t\tyield put(sendError({\n\t\t\talert: 'error',\n\t\t\tmessage: 'Something went wrong with reciving book data from OpenLib'\n\t\t}))\n\t}\n}\n\nfunction* saveBookWorker(action: Effect) {\n\tyield put(addToFound(action.payload))\n}\n\nconst fetchBook = async (ISBN: string): Promise<any> => {\n\tconst URL = 'https://openlibrary.org/api/books?bibkeys=ISBN:' + ISBN +\n\t\t'&format=json&jscmd=data'\n\t\tconst data = await fetch(URL)\n\t\tconst JSONobj = await data.json()\n\treturn await JSONobj\n}\n\n","import { takeEvery, Effect, put } from 'redux-saga/effects'\nimport {sendMessage} from '../slices/components/components'\nimport {appStateActions} from './actionTypes/actions'\n\n\n\nfunction* errorWatcher(){\n\tconsole.log('errorWatcher')\n\tyield takeEvery(appStateActions.ERROR, errorWorker)\n}\n\nfunction* errorWorker(action: Effect) {\n\tconsole.log('errorWorker')\n\tyield put(sendMessage(action.payload))\n}\n\n\nexport default errorWatcher \n","import db from '../firebase/firebase-config'\nimport { collection, getDoc, doc, getDocs } from 'firebase/firestore'\nimport { takeEvery, call, put, StrictEffect, Effect } from 'redux-saga/effects'\nimport { setAdminPrivlidge } from '../slices/user/user'\nimport { setState } from '../slices/books/booksSlice'\nimport { FbDataActions, usersActions } from './actionTypes/actions'\nimport { BookInterface } from '../constants/interface/bookSlice'\nimport {getUsersData, getBorrowed, sendError} from './actions'\nimport {setUsers} from '../slices/usersData/user'\nimport {addToDelete, addToAdd} from '../slices/requests/requestsSlice'\nimport {changeIsLoading} from '../slices/components/components'\n\n\nexport function* getFirebaseDataWatcher(){\n\tconsole.log('FirebaseDataWatcher')\n\tyield takeEvery(FbDataActions.GET_DATA, getFbDataWorker)\n\tyield takeEvery(FbDataActions.EMPTY_DATA, emptyFbDataWorker)\n\tyield takeEvery(usersActions.GET_USERS, getUsersDataWorker)\n\tyield takeEvery(usersActions.CHECK_ADMIN_PRIV, checkAdminWorker)\n}\n\nfunction* checkAdminWorker (action: Effect):\n\tGenerator<StrictEffect, void, boolean>{\n\tconst uid = action.payload\n\ttry {\n\t\tconst adminPriv = yield call(checkAdminPriv, uid)\n\t\tif(adminPriv) {\n\t\tyield put(setAdminPrivlidge())\n\t\tyield put(getUsersData())\n\t\tconst toAddRequests = sessionStorage.getItem('toAdd')\n\t\tconst toDeleteRequests = sessionStorage.getItem('toDelete')\n\t\tif(toDeleteRequests){\n\t\t\tconst array = JSON.parse(toDeleteRequests!)\n\t\t\tfor(let i in array){\n\t\t\t\tyield put(addToDelete(array[i]))\n\t\t\t}\n\t\t}\n\t\tif(toAddRequests){\n\t\t\tconst array = JSON.parse(toAddRequests!)\n\t\t\tfor(let i in array){\n\t\t\t\tyield put(addToAdd(array[i]))\n\t\t\t}\n\t\t}\n\n\t\t} else {\n\t\t\tyield put(getBorrowed(uid))\n\t\t}\n\t\tyield put(sendError({\n\t\t\talert: 'info',\n\t\t\tmessage: 'Succesfully loged in'\n\t\t}))\n\t} catch (e) {\n\t\tconsole.log(e)\n\t\tyield put(sendError({\n\t\t\talert: 'error',\n\t\t\tmessage: 'Something went wrong during authentication'\n\t\t}))\n\t} finally {\n\t\tyield put(changeIsLoading(false))\n\t}\n\n}\nfunction* getFbDataWorker(): Generator<StrictEffect, void, BookInterface[]>{\n\tconsole.log('getFirebaseDataWorker')\n\ttry {\n\t\tconst response: BookInterface[] = yield call(getBookEntries)\n\t\tyield put(setState(response))\n\t} catch (e) {\n\t\tyield put(sendError({\n\t\t\talert: 'error',\n\t\t\tmessage: 'Couldn\\'t retrieve data from database'\n\t\t}))\n\t}\n}\n\nfunction* emptyFbDataWorker(): Generator<StrictEffect, void, []>{\n\tconsole.log('emptyFirebaseDataWorker')\n\tyield put(setState([]))\n\tyield put(changeIsLoading(false))\n\n}\n\nfunction* getUsersDataWorker(): Generator<StrictEffect, void, []>{\n\ttry {\n\t\tconst USERS = yield call(getUsersFromDb)\n\t\tyield put(setUsers(USERS))\n\t} catch (e) {\n\t\tyield put(sendError({\n\t\t\talert: 'error',\n\t\t\tmessage: 'Couldn\\'t retrive data from database'\n\t\t}))\n\t}\n}\n\nconst getBookEntries = async (): Promise<BookInterface[]> =>  {\n\tconst response = await getDocs(collection(db,'BookEntry'))\n\tlet bookEntries = response.docs.map( doc => {\n\t\tconst { authors, title, cover, ISBN, available } = doc.data()\n\t\treturn { id: doc.id, authors, title, cover, ISBN, available }\n\t})\n\treturn bookEntries\n}\n\nconst getUsersFromDb = async () => {\n\tconst docsSnap = await getDocs(collection(db,'users'))\n\tconst data = docsSnap.docs.map( doc => {\n\t\treturn {\n\t\t\tid: doc.id, ...doc.data()\n\t\t}\n\t})\n\treturn data\n}\n\nconst checkAdminPriv = async (uid: string) => {\n\tconst docSnap = await getDoc(doc(db,'users', uid))\n\tif(docSnap.exists()) return docSnap.data().admin\n\treturn false\n}\n\n","import { takeEvery, StrictEffect, put, call, Effect } from 'redux-saga/effects'\nimport { doc, collection, updateDoc, addDoc, deleteDoc } from 'firebase/firestore'\nimport { emptyRequests } from '../slices/requests/requestsSlice'\nimport { \n\tusersActions,\n\tFbDataActions\n} from './actionTypes/actions'\nimport { updateUserStatus } from '../slices/usersData/user'\nimport db from '../firebase/firebase-config'\nimport { requiredData } from '../constants/interface/bookSlice'\nimport {sendError} from './actions'\nimport {addBook, removeBooks} from '../slices/books/booksSlice'\n\nexport function* updateDBWatcher() {\n\tconsole.log('UserUpdateWatcher')\n\tyield takeEvery(usersActions.CHANGE_STATUS, updateUsersWorker)\n\tyield takeEvery(FbDataActions.UPDATE_REQUESTS, updateDBWorker)\n}\n\nfunction* updateDBWorker(action: Effect):\n\tGenerator<StrictEffect, void, string>{\n\tconsole.log('updateDBWorker')\n\tconst { toAdd, toDelete } = action.payload\n\ttry {\n\tfor(let i in toAdd){\n\t\tconst { ISBN, authors, title, cover } = toAdd[i]\n\t\tconst id = yield call(addDocToDb, { ISBN, authors, title, cover })\n\t\tyield put(addBook({\n\t\t\tid,\n\t\t\tISBN,\n\t\t\tauthors,\n\t\t\ttitle,\n\t\t\tcover,\n\t\t\tavailable: true\n\t\t}))\n\t}\n\tlet toDeleteBooksHash: Set<string> = new Set()\n\tfor(let i in toDelete){\n\t\tconst { id } = toDelete[i]\n\t\tyield call(deleteDocFormDb, id)\n\t\ttoDeleteBooksHash.add(id)\n\t}\n\tyield put(removeBooks(toDeleteBooksHash))\n\tyield put(emptyRequests())\n\tyield put(sendError({\n\t\talert: 'success',\n\t\tmessage: 'Updates were successfull'\n\t}))\n\t} catch(e) {\n\t\tconsole.log(e)\n\t\tyield put(sendError({\n\t\t\talert: 'error',\n\t\t\tmessage: 'Error occured during fullfilling requests'\n\t\t}))\n\t}\n}\nfunction* updateUsersWorker(action: Effect) {\n\tconsole.log('UserUpdateWorker')\n\tconst { id , admin } = action.payload\n\ttry{\n\t\tyield call(updateUser, id, admin)\n\t\tyield put(updateUserStatus({id, admin}))\n\t\tyield put(sendError({\n\t\t\talert: 'success',\n\t\t\tmessage: 'Changed successfully'\n\t\t}))\n\t} catch (e) {\n\t\tconsole.log(e)\n\t\tyield put(sendError({\n\t\t\talert: 'error',\n\t\t\tmessage: 'Something went wrong with status changes'\n\t\t}))\n\t}\n}\n\nconst updateUser = async (id: string, privlidge: boolean) => {\n\tconst userToUpdateRef = doc(db, \"users\", id)\n\tawait updateDoc(userToUpdateRef, { admin: privlidge })\n}\n\nconst deleteDocFormDb = async (id: string) => {\n\tawait deleteDoc(doc(db, \"BookEntry\", id));\n}\n\nconst addDocToDb = async (data: requiredData) => {\n\tlet docRef = await addDoc(collection(db, 'BookEntry'), {\n\t\t...data,\n\t\tavailable: true\n\t})\n\treturn docRef.id\n}\n","import { takeEvery, put, call, Effect, StrictEffect } from 'redux-saga/effects'\nimport { doc, getDoc, updateDoc, arrayRemove, arrayUnion } from 'firebase/firestore'\nimport { usersActions } from './actionTypes/actions'\nimport {\n\tsaveMyBorrowed,\n\taddMyBorrowed,\n\tremoveMyBorrowed\n} from '../slices/borrowedBooks/borrowedBooks'\nimport { changeBookStatus } from '../slices/books/booksSlice'\nimport db from '../firebase/firebase-config'\nimport {sendError} from './actions'\n\nexport function* getBorrowedWatcher() {\n\tconsole.log('borrowReturnWatcher')\n\tyield takeEvery(usersActions.GET_BORROWED, getBorrowedWorker)\n\tyield takeEvery(usersActions.BORROW_RETURN, borrowBookWorker)\n}\n\nfunction* getBorrowedWorker(action: Effect):\n\tGenerator<StrictEffect, void, {books: string[]}>{\n\tconsole.log('getBorrowedBooksWorker')\n\ttry {\n\t\tconst borrowedBooks = yield call(getBorrowed, action.payload)\n\t\tyield put(saveMyBorrowed(borrowedBooks.books))\n\t} catch(e) {\n\t\tyield put(sendError({\n\t\t\talert: 'error',\n\t\t\tmessage: 'Something went wrong with reciving borrowed books data'\n\t\t\t}))\n\t}\n}\n\nfunction* borrowBookWorker(action: Effect) {\n\tconsole.log('BorrowWorker')\n\tconst { id, uid, status } = action.payload\n\ttry {\n\tyield call(updateMyBorrowed, uid, id, status)\n\tyield call(updateAvailable, id, status)\n\tyield put(changeBookStatus({id, available: status}))\n\tif(status) {\n\t\tyield put(removeMyBorrowed(id))\n\t\tyield put(sendError({\n\t\t\talert: 'info',\n\t\t\tmessage: 'Book returned'\n\t\t}))\n\t}\n\telse {\n\t\tyield put(addMyBorrowed(id))\n\t\tyield put(sendError({\n\t\t\talert: 'info',\n\t\t\tmessage: 'Book borrowed'\n\t\t}))\n\t}\n\t} catch (e) {\n\t\tif(e instanceof Error){\n\t\t\t\tyield put(sendError({\n\t\t\t\t\talert: 'error',\n\t\t\t\t\tmessage: e.message\n\t\t\t\t}))\n\t\t}\n\t}\n}\n\nconst updateAvailable = async (id: string, status: boolean) => {\n\tconst toUpdate = doc(db, 'BookEntry', id)\n\t\tawait updateDoc(toUpdate, { available: status })\n\n}\nconst updateMyBorrowed = async (uid: string, id: string, status: boolean) => {\n\tconst toUpdate = doc(db, 'borrowed', uid)\n\tif(status){\n\t\tawait updateDoc(toUpdate, {\n\t\tbooks: arrayRemove(id) \n\t\t})\n\t} else {\n\t\tawait updateDoc(toUpdate, {\n\t\tbooks: arrayUnion(id)\n\t\t})\n\t}\n}\n\nconst getBorrowed = async (uid: string) => {\n\tconst docRef = doc(db, \"borrowed\", uid)\n\tconst booksArr = await getDoc(docRef)\n\tif(booksArr.exists()) return booksArr.data()\n}\n","import { all, fork } from 'redux-saga/effects'\nimport { getBookSaga } from './getBookSaga'\nimport  errorWatcher  from './errorSaga'\nimport { getFirebaseDataWatcher } from './getFirebaseDataSaga'\nimport { updateDBWatcher } from './updateDb'\nimport {getBorrowedWatcher} from './borrowBookSaga'\n\n\n\nexport default function* rootSaga() {\n\tconsole.log('rootSaga')\n\tyield all([fork(getBookSaga),\n\t\t\t\t\t\tfork(errorWatcher),\n\t\t\t\t\t\tfork(updateDBWatcher),\n\t\t\t\t\t\tfork(getFirebaseDataWatcher),\n\t\t\t\t\t\tfork(getBorrowedWatcher)])\n}\n","import rootSaga from './rootSaga'\n\n\nexport default rootSaga\n","import { configureStore } from '@reduxjs/toolkit';\nimport createSagaMiddleware from 'redux-saga'\nimport booksReducer from '../slices/books/booksSlice'\nimport addFormStateReducer from '../slices/addBookForm/addBookForm'\nimport borrowedBooksReducer from '../slices/borrowedBooks/borrowedBooks'\nimport componentsReducer from '../slices/components/components'\nimport foundBooksReducer from '../slices/foundEntries/foundEntries'\nimport currentUserReducer from '../slices/user/user'\nimport requestsReducer from '../slices/requests/requestsSlice'\nimport usersDataReducer from '../slices/usersData/user'\nimport currentReadBookReducer from '../slices/currentBook/currentBook'\nimport rootSaga from '../sagas'\n\nconst sagaMiddleware = createSagaMiddleware()\n\nexport const store = configureStore({\n  reducer: {\n    found: foundBooksReducer,\n    books: booksReducer,\n    borrowedBooks: borrowedBooksReducer,\n    addFormState: addFormStateReducer,\n    componentsState: componentsReducer,\n    currentUser: currentUserReducer,\n    requests: requestsReducer,\n    usersData: usersDataReducer,\n    currentRead: currentReadBookReducer\n  },\n  middleware: (getDefaultMiddleware) => \n     getDefaultMiddleware()\n    .prepend(\n      sagaMiddleware\n    )\n});\n\nsagaMiddleware.run(rootSaga)\n\nexport type AppDispatch = typeof store.dispatch;\nexport type RootState = ReturnType<typeof store.getState>;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport { store } from './appStore/store';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter as Router} from 'react-router-dom'\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router>\n    <Provider store={store}>\n      <App />\n    </Provider>\n    </Router>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}